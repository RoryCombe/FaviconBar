<!DOCTYPE html>
<html>
	<head>
		<title>Favicon Bar</title>
		<link rel="stylesheet" href="faviconBar.css" type="text/css" charset="utf-8">
		<script type="text/javascript">
			var FaviconBar = safari.extension.globalPage.contentWindow;

			updateBar = function() {

				if (FaviconBar.barData !== false) {
					document.getElementById("linksTable").innerHTML = FaviconBar.barData;
				}
				if (safari.extension.settings.centerBar == "true") {
					document.getElementById("linksTable").classList.add("centerBar");
				} else {
					document.getElementById("linksTable").classList.remove("centerBar");
				}
			}
			
			clickHandler = function(event) {
				FaviconBar.clickHandler(event,document.getElementById("dropdown"));
			}
						
			init = function() {
			
				document.addEventListener("dragenter",FaviconBar.onBarDragenter);
				document.addEventListener("dragover",FaviconBar.onBarDragover);
				document.addEventListener("drop",FaviconBar.onBarDrop);
				document.addEventListener("contextmenu",clickHandler);
				document.addEventListener("click",clickHandler);
				document.getElementById("settings").addEventListener("click",FaviconBar.launchSettings);
				updateBar();
			
			}						

		</script>
	</head>
	<body onload="init();">		
		<div id="linksTable">
		</div>
		<div id="settings">&#x2699;</div>
		<select id="dropdown"></select>
	</body>
</html>